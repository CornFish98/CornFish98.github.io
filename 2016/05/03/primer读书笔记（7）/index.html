<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->

<head>
  <title>primer读书笔记（7） | CornFish</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="CornFish">
    <meta name="author" content="ZKY">
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="CornFish" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
	
    <link rel="stylesheet" href="/highlightjs/vs.css" type="text/css">
    
    

    <!-- Custom stylesheet, (add custom styles here, always load last) -->
    <!-- Load our stylesheet for IE8 -->
    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- Google Webfonts (Monserrat 400/700, Open Sans 400/600) -->
    <link href='//fonts.useso.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    <link href='//fonts.useso.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>

    <!-- Load our fonts individually if IE8+, to avoid faux bold & italic rendering -->
    <!--[if IE]>
    <link href='http://fonts.useso.com/css?family=Montserrat:400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.useso.com/css?family=Montserrat:700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.useso.com/css?family=Open+Sans:400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.useso.com/css?family=Open+Sans:600' rel='stylesheet' type='text/css'>
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->










  
  
  

  
  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="/img/close.png" alt="Close"/>
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">Home</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">archives</a></li>
            <!-- Dropdown Menu -->
			 
            <li>
                <a class="sb-toggle-submenu">Works<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                        <li><a href="http://cornfish98.com" target="_BLANK" class="animsition-link">MyBlog</a></li>
                    
                </ul>
            </li>
            
            
        	<li>
        		<a class="sb-toggle-submenu">Categories<span class="sb-caret"></span></a>
            	<ul class="sb-submenu">
				  	
				    <li><a href="/categories/C/" class="animsition-link">C++<small>(7)</small></a></li>
				    
				    <li><a href="/categories/Computer-Networking/" class="animsition-link">Computer Networking<small>(1)</small></a></li>
				    
				    <li><a href="/categories/Data-Structure-and-Algorithms/" class="animsition-link">Data Structure and Algorithms<small>(1)</small></a></li>
				    
				    <li><a href="/categories/Information-Security/" class="animsition-link">Information Security<small>(1)</small></a></li>
				    
				    <li><a href="/categories/LeetCode/" class="animsition-link">LeetCode<small>(4)</small></a></li>
				    
				</ul>
        	</li>
			
            
            <li>
                <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a href="http://www.cornfish98.com/" class="animsition-link">ZKY</a></li>
                    
                </ul>
            </li>
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            <li><a href="/about.html" class="animsition-link" title="about">About</a></li>
            <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                        
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">CornFish</a></li>
                            <li class="nolink">一年一年，一天一念</li>
                            
                            <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            
                            
                            <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a></li>
                            
                            
                            <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span></span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">More</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->

        <!-- ============================ Hero Image =========================== -->

        <section id="hero" class="scrollme">
            <div class="container-fluid element-img" style="background: url(/img/bg_img.jpg) no-repeat center center fixed;background-size: cover">
                <div class="row">
                    <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-8 col-md-offset-2 vertical-align cover boost text-center">
                        <div class="center-me animateme" data-when="exit" data-from="0" data-to="0.6" data-opacity="0" data-translatey="100">
                            <div>
                            	
                                <h2>Welcome to Cornfish's blog!</h2>
                                <p></p>
				    			
                                <h2></h2>
                                <p>每一个不曾起舞的日子都是对生命的辜负。</p>
				    			

                            </div>
                        </div>
                    </div>
                    <!-- // .col-md-12 -->
                </div>
                <div class="herofade beige-dk"></div>
            </div>
        </section>

        <!-- Height spacing helper -->
        <div class="heightblock"></div>
        <!-- // End height spacing helper -->

        <!-- ============================ END Hero Image =========================== -->
      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2016-05-03T13:45:46.000Z" itemprop="datePublished">
          2016-05-03
      </time>
    
</span>
                <h1>primer读书笔记（7）</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<h3 id="7-IO库"><a href="#7-IO库" class="headerlink" title="7 IO库"></a>7 IO库</h3><p>C++语言不直接处理输入输出，而是通过一族定义在标准库中的类型来处理IO。这些类型支持从设备读取数据，向设备写入数据的IO操作，这里所说的设备可以是文件，控制台窗口等。还有一些类型允许内存IO，即，从string读取数据，向string写入数据。</p>
<h4 id="7-1-IO类"><a href="#7-1-IO类" class="headerlink" title="7.1 IO类"></a>7.1 IO类</h4><p>标准库中定义了很多IO类型，它们都被定义在如下三个头文件中：</p>
<ol>
<li><code>iostream</code>，类型如下：<code>istream</code>，<code>wistream</code>，从流读取数据；<code>ostream</code>，<code>wostream</code>，向流写入数据；<code>iostream</code>，<code>wiostream</code>，读写流。</li>
<li><code>fstream</code>，类型如下：<code>ifstream</code>，<code>wifstream</code>，从文件读取数据；<code>ofstream</code>，<code>wofstream</code>，向文件写入数据；<code>fstream</code>，<code>wfstream</code>，读写文件。</li>
<li><code>sstream</code>，类型如下：<code>istringstream</code>，<code>wistringstream</code>，从string读取数据；<code>ostringstream</code>，<code>wostringstream</code>，向string写入数据；<code>sstringstream</code>，<code>wstringstream</code>，读写string。</li>
</ol>
<p>C++中为了支持宽字符类型的语言，标准库定义了一组类型和对象来操纵wchar_t类型的数据，宽字符版本的类型和函数的名字以一个w开始，如：<code>wcin</code>、<code>wcout</code>、<code>wcerr</code>等。考虑到设备类型和字符大小不应该影响到我们要执行的IO操作，因此，标准库通过使用继承机制和模板，使得我们可以忽略不同类型的流之间的差异，接下来我们将总结一系列标准库流特性，这些特性都可以无差别的应用于普通流、文件流和string流，以及char或宽字符流版本。</p>
<h5 id="7-1-1-IO对象无拷贝或赋值"><a href="#7-1-1-IO对象无拷贝或赋值" class="headerlink" title="7.1.1 IO对象无拷贝或赋值"></a>7.1.1 IO对象无拷贝或赋值</h5><p>我们不能拷贝或对IO对象赋值，由于不能拷贝IO对象，因此我们也不能将形参或返回类型设置为流类型，进行IO操作的函数通常以引用方式传递和返回流。读写一个IO对象会改变其状态，因此传递和返回的引用不能是const的。</p>
<h5 id="7-1-2-条件状态"><a href="#7-1-2-条件状态" class="headerlink" title="7.1.2 条件状态"></a>7.1.2 条件状态</h5><p>IO操作一个与生俱来的问题是可能发生错误，IO类所定义的一些函数和标志可以帮助我们访问和操纵流的条件状态。如下（其中strm表示某种IO类型，如istream）：</p>
<ul>
<li><code>strm::iostate</code>： 一种机器相关的类型，提供了表达条件状态完整功能</li>
<li><code>strm::badbit</code>：用来指出流已崩溃</li>
<li><code>strm::failbit</code>：用来指出一个IO操作失败了</li>
<li><code>strm::eofbit</code>：用来指出流到达了文件结束</li>
<li><code>strm::goobit</code>：从来指出流未处于错误状态（为0）</li>
<li><code>s.eof()</code>：流s的eofbit置位时返回true</li>
<li><code>s.fail()</code>：流s的failbit或badbit置位时返回true</li>
<li><code>s.bad()</code>：流s的badbit置位时返回true</li>
<li><code>s.good()</code>：若流s处于有效状态，返回true</li>
<li><code>s.clear()</code>：将流s中所有条件状态位复位</li>
<li><code>s.clear(flags)</code>：将流s中对应条件状态位复位</li>
<li><code>s.setstate(flags)</code>：将流s中对应条件状态位置位</li>
<li><code>s.rdstate()</code>：返回s的当前条件状态，返回值类型为strm::iostate</li>
</ul>
<p>IO库定义了一个与机器无关的iostate类型，它提供了表达流状态的完整功能，这个类型应当作为一个位集合来使用，badbit表示系统级错误，如不可恢复的读写错误；发生可恢复错误时，failbit被置位；如果到达文件结束位置，eofbit和failbit都会被置位；goodbit的值为0，表示流未发生错误，如果badbit、failbit、eofbit任何一个被置位，则检测状态的条件都会失败。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> old_state = <span class="built_in">cin</span>.rdstate();</span><br><span class="line"><span class="built_in">cin</span>.clear();</span><br><span class="line">process_input(<span class="built_in">cin</span>);</span><br><span class="line"><span class="built_in">cin</span>.setstate(old_state);</span><br><span class="line"><span class="comment">//复位failbit和badbit，其他标志位保持不变</span></span><br><span class="line"><span class="built_in">cin</span>.clear(<span class="built_in">cin</span>.rdstate() &amp; ~<span class="built_in">cin</span>.failbit &amp; ~<span class="built_in">cin</span>.badbit);</span><br></pre></td></tr></table></figure>
<h5 id="7-1-3-输出缓冲"><a href="#7-1-3-输出缓冲" class="headerlink" title="7.1.3 输出缓冲"></a>7.1.3 输出缓冲</h5><p>每个输出流都管理一个缓冲区，用来保存程序读写的数据，有了缓冲机制，操作系统就可以将程序的多个输出操作组合成单一的系统级写操作。缓冲的刷新是一个重要的问题，例如，一个程序异常终止时，输出缓冲区是不会被刷新的，当一个程序崩溃后，它所输出的数据很可能停留在输出缓冲区中等待打印。如下几个操作符会完成刷新缓冲区的工作：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"hello"</span> &lt;&lt; <span class="built_in">endl</span>; <span class="comment">//输出hello和一个换行，而后刷新缓冲区</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"hello"</span> &lt;&lt; flush;  <span class="comment">//输出hello，而后刷新缓冲区</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"hello"</span> &lt;&lt; ends;  <span class="comment">//输出hello和一个空字符，然后刷新缓冲区</span></span><br></pre></td></tr></table></figure></p>
<p>如果想在每次输出操作后都刷新缓冲区，可以使用<code>unitbuf</code>操纵符，它告诉流在接下来每一次写操作之后都进行一次flush操作。而<code>nounitbuf</code>操纵符则重置流，使其恢复使用正常的系统管理的缓冲区刷新机制。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; unitbuf;  <span class="comment">//所有输出操作后会立即刷新缓冲区</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; nounitbuf;  <span class="comment">//回到正常的缓冲方式</span></span><br></pre></td></tr></table></figure></p>
<h4 id="7-2-文件IO"><a href="#7-2-文件IO" class="headerlink" title="7.2 文件IO"></a>7.2 文件IO</h4><p> <code>ftream</code>继承自<code>iostream</code>，除了继承自<code>iostream</code>类型的行为之外，还增加了一些新的成员来管理与流关联的文件。</p>
<h5 id="7-2-1-fstream特有的操作"><a href="#7-2-1-fstream特有的操作" class="headerlink" title="7.2.1 fstream特有的操作"></a>7.2.1 fstream特有的操作</h5><ul>
<li><code>fstream fstrm;</code>：创建一个未绑定的文件流。</li>
<li><code>fstream fstrm(s)；</code>：创建一个文件流并打开名为s的文件，s可以是string类型，也可以是指向C风格字符串的指针。（注意：这些构造函数都是explicit的，不允许进行隐式类型转换）</li>
<li><code>fstream fstrm(s, mode)；</code>：与上一个构造函数类似，但是会按指定mode打开文件。</li>
<li><code>fstrm.open(s)</code>：打开名为s的文件，并与fstrm绑定，返回void。</li>
<li><code>fstrm.close()</code>：关闭与fstrm绑定的文件，返回void。</li>
<li><code>fstrm.is_open()</code>：返回bool值，指出与fstrm关联的文件是否成功打开且尚未关闭。</li>
</ul>
<p>下面的例子从文件<code>in.txt</code>逐行读入，并写出到文件<code>out.txt</code>中，同时打印到控制台。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	<span class="built_in">string</span> s1 = <span class="string">"C:\\Users\\CornFish\\Desktop\\in.txt"</span>;</span><br><span class="line">	ifstream input;</span><br><span class="line">	<span class="function">ofstream <span class="title">output</span><span class="params">(<span class="string">"C:\\Users\\CornFish\\Desktop\\out.txt"</span>)</span></span>;</span><br><span class="line">	input.open(s1);</span><br><span class="line">	<span class="built_in">string</span> line;</span><br><span class="line">	<span class="keyword">while</span> (getline(input, line)) &#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; line &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		output &lt;&lt; line &lt;&lt; ends;</span><br><span class="line">	&#125;</span><br><span class="line">    return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在要求使用基类的地方，都可以使用继承类型的对象来代替，这意味着，接受一个<code>iostream</code>类型引用（或指针）参数的函数，可以用一个对应的<code>fstream</code>类型来调用。</p>
<p>我们可以使用<code>ifstream in(ifile);</code>直接构筑一个文件流并打开指定文件，也可以先定义一个空文件流，再使用open函数将它与文件关联起来。如果open失败，failbit会被置位，因此进行open是否成功的检测通常是一个好习惯：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ofstream out;</span><br><span class="line">out.open(ifile + <span class="string">".copy"</span>);</span><br><span class="line"><span class="keyword">if</span>(out)&#123;</span><br><span class="line">	<span class="comment">//对文件进行操作</span></span><br><span class="line">&#125;</span><br><span class="line">out.close();</span><br></pre></td></tr></table></figure></p>
<p>如果想将文件流关联到另一个文件，首先要关闭已经关联的文件，再打开新的文件。注意，当一个<code>fstream</code>对象被销毁时，close会被自动调用。</p>
<h5 id="7-2-2-文件模式"><a href="#7-2-2-文件模式" class="headerlink" title="7.2.2 文件模式"></a>7.2.2 文件模式</h5><p>每一个流都有一个关联的文件模式，用来指出如何使用文件，具体如下：in（以读方式打开）、out（以写方式打开）、app（每次写操作前都定位到文件末尾）、ate（打开文件后立即定位到文件末尾）、trunc（截断文件，即原先内容会被清空）、binary（以二进制方式进行IO）。</p>
<p>默认情况下，当我们打开一个ofstream时，文件内容会被丢弃（默认情况下模式隐含设置为输出和截断），阻止一个ofstream清空给定文件内容的方法是同时指定app模式。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//默认情况下，out模式意味着同时使用trunc模式，等价于如下代码：</span></span><br><span class="line"><span class="function">ofstream <span class="title">out</span><span class="params">(<span class="string">"filename"</span>, ofstream::out | ofstream::trunc )</span></span>;</span><br><span class="line"><span class="comment">//要想使原来文件内容不被丢弃，应当指定app模式：</span></span><br><span class="line"><span class="function">ofstream <span class="title">out</span><span class="params">(<span class="string">"filename"</span>, ofstream::app )</span></span>;</span><br></pre></td></tr></table></figure></p>
<h4 id="7-3-string流"><a href="#7-3-string流" class="headerlink" title="7.3 string流"></a>7.3 string流</h4><p><code>sstream</code>头文件定义了三个类型来支持内存IO，<code>istringstream</code>从string读取数据，<code>ostringstream</code>向string写入数据，<code>stringstream</code>既可以向string读取数据，也可以写入数据，这使得string就想一个IO流一样。特有的操作如下（sstream是三种类型中的一个）：</p>
<ul>
<li><code>sstream strm;</code>：strm是一个未绑定的stringstream对象。</li>
<li><code>sstream strm(s);</code>：strm是一个sstream对象，保存<code>string s</code>的一个拷贝。</li>
<li><code>strm.str()</code>：返回strm所保存的string的拷贝。</li>
<li><code>strm.str(s)</code>：将<code>string s</code>拷贝到strm中，返回void。</li>
</ul>
<p>下面我们通过具体的例子来说明string流的使用方法：考虑这样一个现实问题，有很多待读入的个人信息，其中每一行由一个客户名加若干个属于该客户的电话号码构成（每个客户的电话数量可能不同）。我们希望读入这些信息并定义一个数据结构来<br>存储这些信息，而后判断电话号码的格式是否合法，若合法则打印，若不合法则输出相关错误信息。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> PersonInfo &#123;</span><br><span class="line">	<span class="built_in">string</span> name;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; phones;</span><br><span class="line">&#125;；</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">readInfo</span><span class="params">(<span class="built_in">vector</span>&lt;PersonInfo&gt; &amp;people)</span></span>&#123;</span><br><span class="line">	<span class="built_in">string</span> line, word;</span><br><span class="line">	<span class="keyword">while</span>(getline(cin, line))&#123;</span><br><span class="line">		PersonInfo info;</span><br><span class="line">		<span class="function"><span class="built_in">istringstream</span> <span class="title">record</span><span class="params">(line)</span></span>;</span><br><span class="line">		record &gt;&gt; info.name;</span><br><span class="line">		<span class="keyword">while</span>(record &gt;&gt; word)</span><br><span class="line">			info.phones.push_back(word);</span><br><span class="line">		people.push_back(info);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printInfo</span><span class="params">(<span class="built_in">vector</span>&lt;PersonInfo&gt; &amp;people)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry : people)&#123;</span><br><span class="line">		<span class="built_in">ostringstream</span> formatted, badNums;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span> &amp;nums : entry.phones)&#123;</span><br><span class="line">			<span class="keyword">if</span>(!valid(nums))</span><br><span class="line">				badNums &lt;&lt; <span class="string">" "</span> &lt;&lt; format(nums);</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				formatted &lt;&lt; <span class="string">" "</span> &lt;&lt; format(nums);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(badNums.str().empty())</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; entry.name &lt;&lt; <span class="string">" "</span> &lt;&lt; formatted.str() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">cerr</span> &lt;&lt; <span class="string">"input error:"</span> &lt;&lt; entry.name &lt;&lt; <span class="string">" invalid number(s) "</span> &lt;&lt; badNums.str() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    
    <a class="pull-right" href="/2016/05/03/primer读书笔记（6）/">
        primer读书笔记（6） →
    </a>
    
</nav>

        <div class="duoshuo">
<div class="ds-thread" data-thread-key="2016/05/03/primer读书笔记（7）/" data-title="primer读书笔记（7）" data-url="https://github.com/CornFish98/CornFish98.github.io.git/2016/05/03/primer读书笔记（7）/"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"duoshuo_name"};
(function() {
	var ds = document.createElement('script');
	ds.type = 'text/javascript';ds.async = true;
	ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
	ds.charset = 'UTF-8';
	(document.getElementsByTagName('head')[0] 
	 || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
</div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
                <p>
                    &copy; 2014<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By ZKY. All Rights Reserved.
                </p>
            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    
                    
                    <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>

<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
        
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };
    
    resizeHero();
    
    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/jquery.flexslider-min.js"></script><!-- Flexslider plugin -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>

</body>
</html>
